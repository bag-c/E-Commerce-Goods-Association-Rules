# 电商商品关联规则挖掘项目
## 项目概述
本项目基于电商购物篮数据（`GoodsOrder.csv`），利用Apriori算法挖掘商品间的高价值关联规则，筛选出满足「最小支持度0.01、最小置信度0.5、提升度>2」的核心规则，并通过Matplotlib实现提升度排序可视化，最终结果可用于指导电商商品摆放、购物车推荐、关联营销等实际运营场景，具备明确的业务落地价值。

## 项目环境
- Python版本：3.10.2
- 核心依赖库：
  - pandas：数据读取与预处理
  - apyori：关联规则挖掘（Apriori算法实现）
  - matplotlib：数据可视化

## 项目结构
```
├── GoodsOrder.csv        # 原始电商购物篮数据文件
├── main.py               # 项目核心代码（你的完整代码）
└── README.md             # 项目说明文档
```

## 核心功能流程
### 1. 数据导入
读取本地电商购物篮数据文件，获取订单ID（`id`）与商品名称（`Goods`）对应关系。
```python
data = pd.read_csv(r"E:\电商RFM模型\goods\GoodsOrder.csv")
```

### 2. 数据预处理
针对原始数据进行质量清洗，保障后续算法运行的准确性：
- 缺失值处理：删除商品名称（`Goods`）为空的记录
- 异常值处理：删除订单ID（`id`）为负数的无效记录

### 3. 数据格式转换
将原始数据转换为Apriori算法要求的输入格式（二维列表，每个子列表对应一个订单的商品集合）：
1.  计算不重复订单ID的总个数
2.  遍历每个订单ID，提取对应商品并转换为列表
3.  构建订单-商品二维列表（`data_list`）

### 4. 关联规则挖掘
调用`apyori`库的`apriori`函数，设置核心阈值参数，挖掘商品关联规则：
- 最小支持度（`min_support`）：0.01（确保规则具备推广价值）
- 最小置信度（`min_confidence`）：0.5（确保规则具备有效性）
- 筛选条件：提升度（`lift`）>2（确保商品为正向强关联，排除随机关联）

### 5. 结果结构化
将挖掘到的关联规则整理为`DataFrame`格式，方便查看与后续分析，包含4个核心字段：
- 关联规则：商品前件与后件的对应关系（格式：`[前件商品]->[后件商品]`）
- 支持度：规则在所有订单中出现的频率（保留3位小数）
- 置信度：购买前件商品后，购买后件商品的概率（保留3位小数）
- 提升度：商品间关联强度的核心指标（保留3位小数）

### 6. 提升度排序可视化
通过Matplotlib绘制垂直柱状图，实现关联规则提升度降序可视化：
- 中文兼容配置：设置黑体字体，解决负号显示异常问题
- 图表优化：x轴标签旋转45°避免遮挡，添加数值标签提升可读性
- 完整展示：可视化全部14条符合条件的关联规则，无信息遗漏

## 运行说明
1.  将`GoodsOrder.csv`放置在指定文件路径下（或修改代码中的文件路径）
2.  安装依赖库：
    ```bash
    pip install pandas apyori matplotlib
    ```
3.  直接运行`main.py`文件，即可输出结构化关联规则结果，并弹出提升度排序柱状图
4.  运行结果：
    - 控制台输出：14条关联规则的详细指标（关联规则、支持度、置信度、提升度）
    - 可视化图表：商品关联规则提升度排序垂直柱状图（含数值标签，可直观对比）

## 项目结果说明
1.  规则数量：共挖掘出14条满足所有阈值条件的高价值商品关联规则
2.  核心结论：可通过提升度排序明确核心关联商品组合，优先将提升度高的商品组合进行相邻摆放或关联推荐，以提升连带购买率
3.  可视化价值：柱状图清晰呈现所有规则的提升度差异，数值标签可直接读取精准指标，便于运营人员快速决策

## 注意事项
1.  若运行时出现文件找不到错误，请检查`GoodsOrder.csv`的文件路径是否正确
2.  若关联规则数量为0，可适当降低支持度或置信度阈值
3.  图表数值标签已优化居中显示，若出现轻微偏移，可微调`bar_x`或`bar_y`的计算参数
4.  订单ID遍历逻辑依赖ID连续性，若ID不连续，可替换为遍历唯一ID（`data['id'].unique()`）以提升稳健性